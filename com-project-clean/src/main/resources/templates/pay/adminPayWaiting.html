<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" th:href="@{/css/pay/adminPayWaiting.css}">
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
	type="text/javascript"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<title>Insert title here</title>
<style>
	tr:nth-of-type(1){background: #9AE8F9;}
	table th{
		border: 1px solid black;
	}
	select{
		width:200px;
	}
</style>
</head>
<body>
	<div th:include="common/header.html"></div>
	<div th:include="common/taskAside.html"></div>
	<section>
		<h2 id="current_date" align="center">관리자 급여 지급 페이지</h2>
		<br>
		<form action="/pay/adminPayWaiting" name="searchForm" method="post">
			<select name="adminList" id="adminList">
				<!-- ajax로 조회 -->
			</select>
			<input class="payButton" type="submit">
		</form>
			<table border="1">
		        <tr>
		           <th>이름</th> 
		           <th>직급</th> 
		           <th>전화번호</th>
		           <th>급여</th>
		        </tr>
		        <tr th:each="admin : ${ adminList }">
		          <td height="40px" th:text="${ admin.adminName }"></td> 
		          <td th:text="${ admin.adminJob}"></td> 
		          <td th:text="${ admin.adminPhone }"></td> 
		          <td th:text="${ admin.adminSalary }"></td> 
		        </tr>
	    	</table> 
    </section>
</body>
<script>
	$(function(){
			$.ajax({
				url: "/pay/admin",
				success: function(data){
					const $adminList = $("#adminList");
					$adminList.html("");
					
					for (let index in data){
						$adminList.append($("<option>").val(data[index].adminNo).text(data[index].adminName))
					}
				},
				error: function(xhr){
					console.log(xhr);
				}
			});
		});

	

    
</script>

</html>
